<?php

class ExploitationModel extends Model
{
    public function getConsoMoyenne()
    {
        $req = $this->getDb()->prepare('SELECT type, (litreConso / distanceKm) AS `consommation_moyenne`
        FROM `conso_vehicules`
        WHERE `moisConso` = 1 AND `anneeConso` = 2023 AND (`litreConso` / `distanceKm`) IS NOT NULL
        ORDER BY `consommation_moyenne` DESC
        LIMIT 20');
         $req->execute();
        // Récupérer les résultats sous forme de tableau associatif
      $data = $req->fetchAll(PDO::FETCH_ASSOC);
      return $data;  
    }
  
}

