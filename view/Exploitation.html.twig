{% extends 'template.html.twig' %}

{% block title %}Consommation Moyenne{% endblock %}

{% block content %}
<div id="chartContainer"></div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        let data = {{ dataExploitation| json_encode | raw
    }};
    //console.log('Data from controller:', data);

    // Créez un tableau de données dans le format approprié pour Syncfusion
    let dataSource = [];
    data.forEach(item => {
        dataSource.push({
            type: item.type,
            consommation_moyenne: item.consommation_moyenne,
        });
    });

    let chart = new ej.charts.Chart({
        // Configuration de l'axe X
        primaryXAxis: {
            title: 'Type',
            valueType: 'Category', // Définir le type de valeur comme catégorie
            groupMode: 'Point' // Regrouper par point pour éviter le chevauchement
        },
        // Configuration de l'axe Y
        primaryYAxis: {
            title: 'Consommation Moyenne'
        },
        // Configuration de la série en colonnes
        series: [{
            dataSource: dataSource,
            xName: 'type',
            yName: 'consommation_moyenne',
            name: 'Consommation Moyenne',
            type: 'Column'
        }],
        // Titre du graphique
        title: 'Consommation Moyenne par Type'
    }, '#chartContainer');

        // Rendre le graphique
    });
</script>
{% endblock %}