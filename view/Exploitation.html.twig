{% extends 'template.html.twig' %}

{% block title %}Consommation Moyenne{% endblock %}

{% block content %}
<h1>Consommation Moyenne des Véhicules</h1>

<div id="chartContainer">
    <canvas id="myChart"></canvas>
</div>

<script>
    const data = {{ data | json_encode | raw }};

    // Extraire les données pour le graphique
    const labels = data.map(item => item.immatVehicule);
    const values = data.map(item => item.consommation_moyenne);

    const ctx = document.getElementById("myChart").getContext("2d");
    const myChart = new Chart(ctx, {
        type: "doughnut", // Utiliser "doughnut" pour un graphique en cercle
        data: {
            labels: labels,
            datasets: [
                {
                    data: values,
                    backgroundColor: [
                        "rgba(255, 99, 132, 0.6)",
                        "rgba(54, 162, 235, 0.6)",
                        "rgba(255, 206, 86, 0.6)",
                        // Ajoutez plus de couleurs ici pour chaque segment du graphique
                    ],
                },
            ],
        },
    });
</script>
